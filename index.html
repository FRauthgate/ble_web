<html>
<head>
<title>Coke vending machine nearby!</title>
<script>

async function onButtonClick1() {
  let filters = [];

  filters.push({services: ['b56a46b1-2b62-87aa-a241-3abdaa426dfb']});

  try {
 //   alert('Requesting Bluetooth Device...');
    const device = await navigator.bluetooth.requestDevice({filters: filters});

    let server = device.gatt.connect();
	if (server === null) alert("Failed to connect");
else alert(server);

	let service = server.getPrimaryService('b56a46b1-2b62-87aa-a241-3abdaa426dfb');
	if (service === null) alert("Failed to find service");

else alert(service);

    characteristic = service.getCharacteristic('ae955bc6-3fa0-4b88-a7d7-74a7706a0d58');
	if (characteristic === null) alert("Failed to find characteristic");

    alert(characteristic.readValue());

//    alert('> Name:             ' + device.name);
 //   alert('> Id:               ' + device.id);
//    alert('> Connected:        ' + device.gatt.connected);
//    alert('> Connected:        ' + device.gatt.manufacturer);

  } catch(error)  {
    alert('Argh! ' + error);
  }
}


async function onButtonClick2() {
navigator.bluetooth.requestDevice({
  filters: [{
    services: ['b56a46b1-2b62-87aa-a241-3abdaa426dfb'],
  }]
}).then(device => device.gatt.connect())
.then(server => server.getPrimaryService('b56a46b1-2b62-87aa-a241-3abdaa426dfb'))
.then(service => {
  chosenHeartRateService = service;
  return Promise.all([
    service.getCharacteristic('ae955bc6-3fa0-4b88-a7d7-74a7706a0d58')
      .then(alert(characteristic.readValue())),
  ]);
});
}

</script>

</head>

<body>

Hello 8:</br> 
<button onClick="onButtonClick1();">Test 1</button></br>
<button onClick="onButtonClick2();">Test 2</button></br>

</body>
</html>